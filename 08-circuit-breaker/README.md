# 模組 08: Resilience4j 斷路器

## 學習目標

完成本模組後，你將能夠：

- ✅ 理解斷路器（Circuit Breaker）模式
- ✅ 使用 Resilience4j 實現斷路器
- ✅ 實現降級（Fallback）策略
- ✅ 配置重試機制
- ✅ 監控故障和恢復

## 核心概念

### 1. 為什麼需要斷路器？

**問題**：
- 微服務間存在依賴關係
- 一個服務故障會影響其他服務
- 可能導致級聯故障（Cascading Failure）

**解決方案**：
- 斷路器：檢測故障並快速失敗
- 防止無謂的等待
- 自動恢復

### 2. 斷路器三種狀態

```
        ┌─────────────┐
        │   CLOSED    │  正常狀態
        │(允許請求)   │
        └──────┬──────┘
               │
          故障率高
               │
               ▼
        ┌─────────────┐      
        │   OPEN      │      故障狀態
        │(拒絕請求)   │      返回降級結果
        └──────┬──────┘
               │
            超時時間到
               │
               ▼
        ┌─────────────┐
        │ HALF_OPEN   │ 試探狀態
        │(允許部分)   │
        └─────────────┘
```

### 3. 降級策略

- 返回缺省值
- 返回緩存數據
- 返回空集合
- 調用備用服務

## 快速開始

```bash
# 編譯
mvn clean install

# 啟動應用
mvn spring-boot:run
```

## 學習計劃

### Day 22: 斷路器基礎

- Resilience4j 概念
- @CircuitBreaker 註解
- 基本配置

### Day 23: 降級與重試

- 實現降級函數
- 重試機制
- 超時配置

### Day 24: 監控和統計

- 統計故障信息
- 性能指標
- 告警配置

---

**相關模組**: [模組 09 - Distributed Tracing](../09-distributed-tracing/README.md)
