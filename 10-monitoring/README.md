# æ¨¡çµ„ 10: Prometheus èˆ‡ Grafana ç›£æ§

## å­¸ç¿’ç›®æ¨™

å®Œæˆæœ¬æ¨¡çµ„å¾Œï¼Œä½ å°‡èƒ½å¤ ï¼š

- âœ… ç†è§£ç›£æ§å’ŒæŒ‡æ¨™çš„é‡è¦æ€§
- âœ… ä½¿ç”¨ Prometheus æ”¶é›†æŒ‡æ¨™
- âœ… é…ç½® Grafana å„€è¡¨æ¿
- âœ… è¨­ç½®å‘Šè­¦è¦å‰‡
- âœ… ç›£æ§ç³»çµ±æ€§èƒ½

## æ ¸å¿ƒæ¦‚å¿µ

### 1. ç›£æ§æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‡‰ç”¨ A      â”‚     â”‚  æ‡‰ç”¨ B      â”‚     â”‚  æ‡‰ç”¨ C      â”‚
â”‚(æš´éœ²æŒ‡æ¨™)    â”‚     â”‚(æš´éœ²æŒ‡æ¨™)    â”‚     â”‚(æš´éœ²æŒ‡æ¨™)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                 (å®šæœŸæŠ“å–)  â”‚
                            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚ Prometheus    â”‚
                      â”‚  (æ™‚é–“åºåˆ—DB) â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚            â”‚            â”‚
                 â–¼            â–¼            â–¼
            Grafana      å‘Šè­¦è¦å‰‡     API æŸ¥è©¢
         (å¯è¦–åŒ–å„€è¡¨æ¿) (å‘Šè­¦ç³»çµ±)   (æ•¸æ“šæŸ¥è©¢)
```

### 2. ä¸‰ç¨®æŒ‡æ¨™é¡å‹

- **Counter**ï¼šåªå¢ä¸æ¸›ï¼ˆå¦‚è«‹æ±‚ç¸½æ•¸ï¼‰
- **Gauge**ï¼šå¯ä¸Šå‡ä¸‹é™ï¼ˆå¦‚ç•¶å‰é€£æ¥æ•¸ï¼‰
- **Histogram**ï¼šåˆ†ä½ˆçµ±è¨ˆï¼ˆå¦‚è«‹æ±‚è€—æ™‚åˆ†ä½ˆï¼‰

### 3. é—œéµæŒ‡æ¨™

- `http_requests_total`ï¼šHTTP è«‹æ±‚ç¸½æ•¸
- `http_request_duration_seconds`ï¼šè«‹æ±‚è€—æ™‚
- `jvm_memory_used_bytes`ï¼šJVM å…§å­˜ä½¿ç”¨
- `jvm_threads_live`ï¼šæ´»èºç·šç¨‹æ•¸

## å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• Prometheus

```bash
docker run -d --name prometheus \
  -p 9090:9090 \
  -v $(pwd)/prometheus.yml:/etc/prometheus/prometheus.yml \
  prom/prometheus
```

### 2. å•Ÿå‹• Grafana

```bash
docker run -d --name grafana \
  -p 3000:3000 \
  grafana/grafana
```

### 3. è¨ªå• Grafana

```
http://localhost:3000
ç”¨æˆ¶åï¼šadmin
å¯†ç¢¼ï¼šadmin
```

## å­¸ç¿’è¨ˆåŠƒ

### Day 28: Prometheus æŒ‡æ¨™æ”¶é›†

- Micrometer é›†æˆ
- è‡ªè¨‚æŒ‡æ¨™
- æŒ‡æ¨™æš´éœ²ç«¯é»

### Day 29: Grafana å„€è¡¨æ¿

- å„€è¡¨æ¿è¨­è¨ˆ
- åœ–è¡¨é…ç½®
- å‘Šè­¦è¦å‰‡

### Day 30: ç¶œåˆå¯¦è¸

- æ•´åˆæ‰€æœ‰æ¨¡çµ„
- å®Œæ•´ç³»çµ±ç›£æ§
- æ€§èƒ½å„ªåŒ–

---

**ä¸‹ä¸€æ­¥**: å®Œæˆæœ¬èª²ç¨‹å¾Œï¼Œä½ å°‡å…·å‚™æ§‹å»ºå’Œé‹ç¶­å¾®æœå‹™ç³»çµ±çš„å®Œæ•´èƒ½åŠ›ï¼ğŸš€
